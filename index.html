<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Management System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .controls input, .controls select {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 10px;
            width: 200px; /* Adjusted width */
        }

        .controls select {
            width: 218px; /* Adjusted width to account for select arrow */
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f0f0f0;
            cursor: pointer;
        }

        th:hover {
            background-color: #e0e0e0;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .controls {
                flex-direction: column;
            }

            .controls input, .controls select {
                width: 100%;
            }

            table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        }

        .error-message {
            color: red;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Employee Management System</h1>

        <div class="controls">
            <input type="text" id="searchName" placeholder="Search by Name">
            <select id="filterDepartment">
                <option value="">All Departments</option>
                <option value="Sales">Sales</option>
                <option value="Marketing">Marketing</option>
                <option value="Engineering">Engineering</option>
                <option value="HR">HR</option>
                <option value="Finance">Finance</option>
            </select>
        </div>

        <table id="employeeTable">
            <thead>
                <tr>
                    <th data-sort="name">Name</th>
                    <th data-sort="department">Department</th>
                    <th data-sort="salary">Salary</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <div class="error-message" id="errorMessage"></div>
    </div>

    <script>
        const employees = [
            { name: "John Doe", department: "Sales", salary: 60000 },
            { name: "Jane Smith", department: "Marketing", salary: 70000 },
            { name: "Peter Jones", department: "Engineering", salary: 80000 },
            { name: "Mary Brown", department: "HR", salary: 65000 },
            { name: "David Lee", department: "Finance", salary: 75000 },
            { name: "Sarah Miller", department: "Sales", salary: 62000 },
            { name: "Michael Davis", department: "Marketing", salary: 72000 },
            { name: "Linda Wilson", department: "Engineering", salary: 82000 },
            { name: "Christopher Garcia", department: "HR", salary: 67000 },
            { name: "Angela Rodriguez", department: "Finance", salary: 77000 }
        ];

        const employeeTable = document.getElementById("employeeTable").getElementsByTagName('tbody')[0];
        const searchNameInput = document.getElementById("searchName");
        const filterDepartmentSelect = document.getElementById("filterDepartment");
        const errorMessageDiv = document.getElementById("errorMessage");

        let currentEmployees = [...employees]; // Create a copy for filtering and sorting
        let currentSortColumn = null;
        let currentSortDirection = 'asc';

        function displayEmployees(employeesToDisplay) {
            employeeTable.innerHTML = "";
            if (!employeesToDisplay || employeesToDisplay.length === 0) {
                errorMessageDiv.textContent = "No employees found matching your criteria.";
                return;
            }
            errorMessageDiv.textContent = "";

            employeesToDisplay.forEach(employee => {
                let row = employeeTable.insertRow();
                let nameCell = row.insertCell();
                let departmentCell = row.insertCell();
                let salaryCell = row.insertCell();

                nameCell.textContent = employee.name;
                departmentCell.textContent = employee.department;
                salaryCell.textContent = employee.salary;
            });
        }

        function filterEmployees() {
            const searchTerm = searchNameInput.value.toLowerCase();
            const selectedDepartment = filterDepartmentSelect.value;

            currentEmployees = employees.filter(employee => {
                const nameMatch = employee.name.toLowerCase().includes(searchTerm);
                const departmentMatch = selectedDepartment === "" || employee.department === selectedDepartment;
                return nameMatch && departmentMatch;
            });

            displayEmployees(currentEmployees);
        }

        function sortTable(column) {
            if (column === currentSortColumn) {
                currentSortDirection = currentSortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                currentSortColumn = column;
                currentSortDirection = 'asc';
            }

            currentEmployees.sort((a, b) => {
                let comparison = 0;
                if (column === 'name') {
                    comparison = a.name.localeCompare(b.name);
                } else if (column === 'department') {
                    comparison = a.department.localeCompare(b.department);
                } else if (column === 'salary') {
                    comparison = a.salary - b.salary;
                }

                return currentSortDirection === 'asc' ? comparison : -comparison;
            });

            displayEmployees(currentEmployees);
        }

        // Event listeners
        searchNameInput.addEventListener("input", filterEmployees);
        filterDepartmentSelect.addEventListener("change", filterEmployees);

        const tableHeaders = document.querySelectorAll("#employeeTable th");
        tableHeaders.forEach(header => {
            header.addEventListener("click", () => {
                sortTable(header.dataset.sort);
            });
        });

        // Initial display
        displayEmployees(currentEmployees);
    </script>
</body>
</html>